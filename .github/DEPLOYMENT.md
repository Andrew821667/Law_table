# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ CI/CD

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

–î–ª—è —Ä–∞–±–æ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

### –®–∞–≥–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. –ù–∞–∂–º–∏—Ç–µ **New repository secret**
4. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:

| Secret Name | Value | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-------|----------|
| `SSH_HOST` | `84.19.3.240` | IP –∞–¥—Ä–µ—Å VPS —Å–µ—Ä–≤–µ—Ä–∞ |
| `SSH_USER` | `root` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH |
| `SSH_PASSWORD` | `–≤–∞—à_–ø–∞—Ä–æ–ª—å` | –ü–∞—Ä–æ–ª—å –æ—Ç VPS |

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç CI/CD

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Pull Request (PR):
- ‚úÖ –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- ‚ùå –î–µ–ø–ª–æ–π **–ù–ï** –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

### –ü—Ä–∏ push –≤ –≤–µ—Ç–∫—É `main` –∏–ª–∏ `master`:
- ‚úÖ –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** –Ω–∞ VPS
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### –ü—Ä–∏ push –≤ –¥—Ä—É–≥–∏–µ –≤–µ—Ç–∫–∏ (`develop`, `claude/**`):
- ‚úÖ –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚ùå –î–µ–ø–ª–æ–π **–ù–ï** –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

## –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

1. –ö–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞ VPS –ø–æ SSH
2. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `git fetch` –∏ `git reset --hard`
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è `package.json`)
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ VPS –≤—Ä—É—á–Ω—É—é:

```bash
cd /root/Law_table && \
git fetch origin && \
git reset --hard origin/main && \
npm install --production && \
pm2 restart all
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ VPS:

```bash
pm2 status
pm2 logs
```

## Troubleshooting

### –î–µ–ø–ª–æ–π –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ secrets –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ GitHub
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ push –∏–¥–µ—Ç –≤ –≤–µ—Ç–∫—É `main` –∏–ª–∏ `master`

### –û—à–∏–±–∫–∏ SSH
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å IP –∞–¥—Ä–µ—Å–∞ –∏ –ø–∞—Ä–æ–ª—è –≤ secrets
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ VPS –¥–æ—Å—Ç—É–ø–µ–Ω

### PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `pm2 list`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs`
